{% extends 'base.html' %}
{% block content %}
<h2>Schedules</h2>
{% if schedules %}
<table>
<tr><th>Name</th><th>Trigger</th><th>Group</th><th>Firmware</th><th>Dry‑run</th><th>Enabled</th></tr>
{% for s in schedules %}
<tr>
<td>{{ s.name }}</td>
<td>{{ s.cron or (s.interval_minutes ~ ' min') }}</td>
<td>{{ s.target_group.name if s.target_group else 'All' }}</td>
<td>{{ s.firmware_path }}</td>
<td>{{ 'Yes' if s.dry_run else 'No' }}</td>
<td>{{ 'Yes' if s.enabled else 'No' }}</td>
</tr>
{% endfor %}
</table>
{% else %}
<p>No schedules created yet.</p>
{% endif %}

<h3>Create / Update Schedule</h3>
<form method="post">
Name:<input name="name">
Firmware path/URL:<input name="firmware_path">
Group:<select name="group_id">
    <option value="">All</option>
    {% for g in groups %}
    <option value="{{ g.id }}">{{ g.name }}</option>
    {% endfor %}
</select>
Cron:<input name="cron" placeholder="m h dom mon dow e.g. '0 3 * * 0'">
or Interval (minutes):<input name="interval">
Dry‑run:<input type="checkbox" name="dry_run">
Enabled:<input type="checkbox" name="enabled" checked>
<button type="submit">Save</button>
</form>
{% endblock %}
